# XMSLEEP

一个专注于白噪音播放的 Android 应用，帮助您放松、专注和入眠。
## 功能特性

- 🎵 **多种白噪音**：提供雨声、篝火、雷声、猫咪呼噜、鸟鸣、夜虫等多种自然声音
- 🎨 **精美动画**：每个声音配有 Lottie 动画，增强视觉体验
- ⏰ **倒计时功能**：设置自动停止播放的时间，帮助您控制使用时长
- 🔊 **音量控制**：支持单独调节每个声音的音量，或一键调整所有声音
- 🌓 **主题切换**：支持浅色/深色模式切换，适配系统主题
- 🎨 **自定义主题**：多种颜色主题可选，支持动态颜色
- 📱 **Material Design 3**：采用最新的 Material Design 3 设计规范
- 📋 **默认播放区域**：支持将常用声音添加到默认播放区域，快速访问
- ⭐ **收藏功能**：收藏喜欢的白噪音声音
- 🔄 **自动更新**：支持通过 GitHub Releases 自动检查更新

## 技术栈

- **Kotlin** - 主要开发语言
- **Jetpack Compose** - 现代化 UI 框架
- **Material Design 3** - UI 设计系统
- **ExoPlayer/Media3** - 音频播放引擎
- **Lottie** - 动画支持
- **MaterialKolor** - 动态颜色方案
- **OkHttp** - 网络请求和文件下载

## 当前版本

- **版本号**: 2.0.2
- **Version Code**: 22

## 构建要求

- Android Studio Hedgehog | 2023.1.1 或更高版本
- JDK 17 或更高版本
- Android SDK API 33 或更高版本
- Gradle 8.0 或更高版本

## 构建步骤

1. 克隆仓库
```bash
git clone https://github.com/Tosencen/XMSLEEP.git
cd XMSLEEP
```

2. 使用 Android Studio 打开项目

3. 同步 Gradle 依赖

4. 运行项目到设备或模拟器

## 使用说明

1. **播放声音**：点击声音卡片开始播放，再次点击停止
2. **调整音量**：播放时点击卡片右下角的音量图标，可以单独调节每个声音的音量
3. **设置倒计时**：点击右下角的倒计时按钮，设置自动停止时间
4. **切换主题**：点击左上角的主题切换按钮，在浅色和深色模式之间切换
5. **自定义设置**：在设置页面可以调整主题颜色、隐藏动画等
6. **默认播放区域**：点击声音卡片标题，选择"默认"可将声音添加到默认播放区域
7. **收藏功能**：点击声音卡片标题，选择"收藏"可将声音添加到收藏列表

## 更新日志

### v2.0.2
- ✨ **新功能**：从系统设置返回后自动检测安装权限并弹出安装对话框
- 🐛 **修复**：修复安装权限处理逻辑，解决"无法启动安装程序"的问题
- 🐛 **修复**：修复权限请求后的重试安装逻辑
- 🔧 **改进**：优化代码规范，移除不必要的完整包名引用

### v2.0.1
- 🐛 **修复**：修复安装权限处理逻辑
- 🐛 **修复**：修复权限请求后的重试安装逻辑
- 🔧 **改进**：优化代码规范

### v2.0.0
- ✨ **新功能**：全局浮动播放按钮，支持展开/收缩，显示最多 3 个正在播放的卡片
- ✨ **新功能**：长按拖动停止播放功能，拖动到红色区域停止所有播放
- ✨ **新功能**：关于弹窗更新，新增声音来源说明
- 🎨 **改进**：浮动按钮采用 Material Design 3 设计规范
- 🔧 **改进**：优化状态管理，支持浮动按钮位置和展开状态的持久化

### v1.0.4
- 优化更新检查逻辑
- 修复版本号读取问题
- 改进错误处理和日志输出
- 增强更新弹窗的用户体验

### v1.0.3
- 初始发布版本
- 支持多种白噪音播放
- 支持主题切换和自定义
- 支持倒计时和音量控制

## 许可证

本项目采用 [MIT License](LICENSE) 许可证。

### ⚠️ 声音来源说明

本应用中的声音来源如下：

- **内置声音**：来自开源音频资源库
- **网络声音**：来自 [moodist](https://github.com/remvze/moodist) 项目，遵循 MIT 开源许可协议
- **第三方资源**：部分声音来自第三方提供商，遵循相应的许可协议
  - 遵循 **Pixabay Content License** 的声音：[Pixabay Content License](https://pixabay.com/service/license-summary/)
  - 遵循 **CC0** 的声音：[Creative Commons Zero License](https://creativecommons.org/publicdomain/zero/1.0/)

## 贡献

欢迎提交 Issue 和 Pull Request！

## 作者

[Tosencen](https://github.com/Tosencen)

---

© 2025 XMSLEEP. All rights reserved.
